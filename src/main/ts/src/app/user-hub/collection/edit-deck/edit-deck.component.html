<mat-card class="selection-panel mat-elevation-z4">
  <mat-form-field class="deck-name-input">
    <mat-label>Deck Name</mat-label>
    <input matInput type="text"
           [(ngModel)]="deck.deckId"
           [ngModelOptions]="{standalone: true}">
  </mat-form-field>
  <mat-form-field style="margin-left: 10px"><!--margin doesn't work with class, dunno why-->
    <mat-select [(value)]="deck.character" placeholder="Character" panelClass="selection">
      <mat-option *ngFor="let character of collection.characters" [value]="character">
        {{character.bindingName}}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <div class="buttons">
    <button mat-raised-button color="accent" class="mat-elevation-z4" (click)="saveDeckAction()">Save Deck</button>
    <button mat-raised-button color="primary" class="mat-elevation-z4" style="margin-left: 10px" (click)="exitAction()">
      Exit
    </button>
  </div>
</mat-card>

<mat-card class="selection-panel mat-elevation-z4">
  <mat-form-field style="margin-left: 10px">
    <mat-select [(value)]="deck.basicActionCard" placeholder="Basic Action Card">
      <mat-option *ngFor="let card of filterBasicActionCards()" [value]="card">
        {{card.name}}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field style="margin-left: 10px">
    <mat-select [(value)]="deck.lastResortCard" placeholder="Last Resort Card">
      <mat-option *ngFor="let card of filterLastResortCards()" [value]="card">
        {{card.name}}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field style="width: 90%; margin-left: 5%;">
    <mat-select [(value)]="deck.characterBoundCards" placeholder="Character Bound Cards" multiple>
      <mat-option *ngFor="let card of filterCharacterBoundCards()" [value]="card">
        {{card.name}}
      </mat-option>
    </mat-select>
  </mat-form-field>
</mat-card>

<mat-accordion>
  <mat-expansion-panel class="selection-panel mat-elevation-z4">
    <mat-expansion-panel-header>
      <mat-panel-title>
        Regular Deck
      </mat-panel-title>
      <mat-panel-description class="right-aligned">
        {{deck.regularCards.length}} cards
      </mat-panel-description>
    </mat-expansion-panel-header>
    <mat-form-field>
      <mat-label>Search Card</mat-label>
      <input matInput type="text"
             (keyup)="searchCollectionCards()"
             [(ngModel)]="collectionSearchTerm"
             [ngModelOptions]="{standalone: true}">
    </mat-form-field>
    <mat-slide-toggle [(ngModel)]="showDeckToggle" (ngModelChange)="changeCardShownByToggle()">
      {{showDeckToggle ? 'Deck' : 'Collection'}}
    </mat-slide-toggle>
    <div fxLayout="row wrap" fxLayoutGap="10px grid" fxFlexAlign="stretch">
      <div fxFlex="20%" fxFlex.md="25%" fxFlex.sm="33%" fxFlex.xs="50%"
           *ngFor="let card of collectionCardsShown">
        <app-collection-card [card]="card" (click)="addOrRemoveFromDeck(card)"></app-collection-card>
      </div>
    </div>
  </mat-expansion-panel>
</mat-accordion>

